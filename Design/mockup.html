<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GoMad â€” Mockup (Onboarding / Main / Voluntarios)</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="frame">
    <nav class="topbar">
      <button class="back" aria-label="Volver">â†</button>
      <button class="help">â˜ï¸ Ayuda</button>
    </nav>

    <!-- Splash / Loading (2-3s in real app) -->
    <section id="splash" class="screen center-screen">
      <div class="logo-wrap">
        <div class="logo-illustration">ğŸ‘µ</div>
        <h1 class="brand">GoMad</h1>
      </div>
      <div class="controls">
        <button type="button" onclick="show('onboarding')">Ir a Onboarding</button>
        <button type="button" onclick="show('main-off')">Ir a Main (OFF)</button>
        <button type="button" onclick="show('main-on')">Ir a Main (ON)</button>
        <button type="button" onclick="show('volunteer')">Ir a Voluntarios</button>
      </div>
    </section>

    <!-- Onboarding: aparece solo la primera vez -->
    <section id="onboarding" class="screen">
      <div class="center-col">
        <div class="logo-illustration big">ğŸ‘µ</div>
        <h1 class="title">Â¡Bienvenido a GoMad!</h1>
        <p class="subtitle">Introduce tus datos para empezar:</p>

        <form class="form" onsubmit="completeOnboarding(event)">
          <label class="field">
            <span class="field-icon">â˜ï¸</span>
            <input inputmode="tel" placeholder="+34  Tu telÃ©fono" aria-label="Tu telÃ©fono" required>
          </label>

          <label class="field">
            <span class="field-icon">ğŸ“</span>
            <input inputmode="numeric" placeholder="CÃ³digo postal" aria-label="CÃ³digo postal" required>
          </label>

          <label class="field">
            <span class="field-icon">ğŸ </span>
            <input placeholder="Calle de la vivienda" aria-label="Calle de la vivienda" required>
          </label>

          <div class="perm">
            <div class="perm-left">ğŸ¤</div>
            <div class="perm-right">
              <div class="perm-title">Permitir micrÃ³fono</div>
              <div class="perm-desc">Necesitamos acceder al micrÃ³fono para que puedas pedir cÃ³modamente por voz.</div>
            </div>
            <div class="perm-action">
              <button type="button" class="btn-orange" onclick="requestMic(true)">Permitir</button>
            </div>
          </div>

          <button class="btn-continue" type="submit">Continuar</button>
        </form>

      </div>
    </section>

    <!-- Main OFF (always after onboarding) -->
    <section id="main-off" class="screen">
      <div class="center-col">
        <div class="logo-illustration big">ğŸ‘µ</div>
        <h1 class="title big-title">GoMad</h1>
        <p class="subtitle">Pulsa para hablar</p>

        <button type="button" id="micBig" class="mic-big off" aria-pressed="false" onclick="toggleMic()">
          <div class="mic-icon">ğŸ¤</div>
          <div class="mic-label">MICRÃ“FONO APAGADO</div>
        </button>

        <p class="hint">MantÃ©n presionado o pulsa una vez para cambiar.</p>

        <button type="button" class="phone-pill">â˜ï¸ Llamar</button>
      </div>
    </section>

    <!-- Main ON -->
    <section id="main-on" class="screen">
      <div class="center-col">
        <div class="logo-illustration big">ğŸ‘µ</div>
        <h1 class="title big-title">GoMad</h1>
        <p class="subtitle">Di lo que necesitas en voz alta</p>

        <button type="button" id="micBigOn" class="mic-big on" aria-pressed="true" onclick="toggleMic()">
          <div class="mic-icon">ğŸ¤ğŸ“¢</div>
          <div class="mic-label">MICRÃ“FONO ENCENDIDO</div>
        </button>

        <p class="hint">Habla ahora: la app grabarÃ¡ tu mensaje de voz.</p>

        <button type="button" class="phone-pill">â˜ï¸ Llamar</button>
      </div>
    </section>

    <!-- Voluntarios -->
    <section id="volunteer" class="screen">
      <div class="center-col">
        <div class="logo-illustration big">ğŸ‘µ</div>
        <h1 class="vol-title">Pantalla para los voluntarios</h1>
        <p class="vol-desc">Interfaz simple para recibir audios y llamadas.</p>

        <button type="button" class="btn-accept">Recibir llamada/audio</button>
        <button type="button" class="phone-pill">â˜ï¸ Llamar</button>
      </div>
    </section>

  </div>

  <script>
    // simple navigation for mockup
    function show(id){
      document.querySelectorAll('.screen').forEach(s=>s.style.display='none');
      document.getElementById(id).style.display='flex';
    }

    // initial: show splash
    show('splash');

    function completeOnboarding(e){
      e.preventDefault();
      // in real app store locally and never show onboarding again
      show('main-off');
    }

    async function requestMic(simulate){
      if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia){
        alert('La API de micrÃ³fono no estÃ¡ disponible en este contexto. Abre el mockup desde un servidor (http/https).');
        return;
      }
      try{
        await navigator.mediaDevices.getUserMedia({audio:true});
        alert('MicrÃ³fono permitido (simulado).');
      }catch(e){
        alert('Permiso no concedido.');
      }
    }

    // Toggle big mic between off/on
    let micOn = false;
    function toggleMic(){
      micOn = !micOn;
      if(micOn){ show('main-on'); } else { show('main-off'); }
    }

    // safer show: check element exists
    function show(id){
      const el = document.getElementById(id);
      if(!el) return;
      document.querySelectorAll('.screen').forEach(s=>s.style.display='none');
      el.style.display='flex';
    }
  </script>
</body>
</html>
